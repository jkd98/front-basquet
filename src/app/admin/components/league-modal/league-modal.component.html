<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [closable]="true"
  [draggable]="false"
  [resizable]="false"
  styleClass="league-modal"
  [style]="{ width: '90vw', maxWidth: '500px' }"
  (onHide)="closeModal()"
>
  <ng-template pTemplate="header">
    <div class="modal-header">
      <i class="pi pi-trophy"></i>
      <span>Nueva Liga</span>
    </div>
  </ng-template>

  <div class="modal-content">
    <div class="form-field">
      <label for="leagueName">
        <i class="pi pi-tag"></i>
        Nombre de la Liga
      </label>
      <input
        type="text"
        id="leagueName"
        [(ngModel)]="leagueName"
        placeholder="Ej: Liga Profesional 2024"
        class="text-input"
      />
    </div>

    <div class="form-field">
      <label for="leagueCategory">
        <i class="pi pi-bookmark"></i>
        Categoría de la Liga
      </label>
      <input
        type="text"
        id="leagueCategory"
        [(ngModel)]="leagueCategory"
        placeholder="Ej: Profesional, Juvenil, Amateur"
        class="text-input"
      />
    </div>

    <div class="form-field">
      <label>
        <i class="pi pi-image"></i>
        Logotipo de la Liga
      </label>
      <div class="logo-upload-box" (click)="triggerFileInput()">
        <input
          type="file"
          id="logoInput"
          accept="image/*"
          (change)="onFileSelected($event)"
          style="display: none"
        />

        <div class="upload-content" *ngIf="!logoPreview">
          <i class="pi pi-cloud-upload"></i>
          <span class="upload-text">Haz clic para subir el logotipo</span>
          <span class="upload-hint">PNG, JPG o SVG (máx. 5MB)</span>
        </div>

        <div class="preview-content" *ngIf="logoPreview">
          <img [src]="logoPreview" alt="Logo preview" />
          <div class="preview-overlay">
            <i class="pi pi-refresh"></i>
            <span>Cambiar imagen</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="modal-footer">
      <button class="btn-cancel" type="button" (click)="closeModal()">
        <i class="pi pi-times"></i>
        Cancelar
      </button>
      <button
        class="btn-submit"
        type="button"
        (click)="createLeague()"
        [disabled]="!isFormValid() || isLoading"
      >
        <i class="pi pi-check"></i>
        {{ isLoading ? 'Creando...' : 'Crear Liga' }}
      </button>
    </div>
  </ng-template>
</p-dialog>