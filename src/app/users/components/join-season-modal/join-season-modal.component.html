<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [closable]="true"
  [dismissableMask]="true"
  [style]="{ width: '450px', maxWidth: '95vw' }"
  [styleClass]="'team-dialog'"
  (onHide)="onDialogHide()"
>
  <div class="join-season-wrapper">
    <div class="wizard-header-top">
      <h2 class="form__heading">
        Unir equipo a temporada
      </h2>
      <p class="wizard-subtitle">
        Ingresa el código de invitación de la temporada
        <span *ngIf="teamName"> para <strong>{{ teamName }}</strong></span>.
      </p>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
      <div class="form__campo">
        <label for="code">
          <span class="label-icon"><i class="pi pi-key"></i></span>
          <span>Código de temporada *</span>
        </label>

        <input
          id="code"
          type="text"
          formControlName="code"
          [class.ng-invalid]="isFieldInvalid('code')"
          placeholder="Ej: ABCD-1234"
        />

        <small class="error-message" *ngIf="isFieldInvalid('code')">
          {{ getFieldError('code') }}
        </small>
      </div>

      <div class="wizard-step-actions modal-actions">
        <button
          type="button"
          class="btn-secondary"
          (click)="onCancel()"
          [disabled]="isSubmitting"
        >
          <i class="pi pi-times"></i>
          <span>Cancelar</span>
        </button>

        <button
          type="submit"
          class="btn-primary"
          [disabled]="isSubmitting || !teamId"
        >
          <i class="pi pi-check"></i>
          <span>
            {{ isSubmitting ? 'Unificando...' : 'Unirse a temporada' }}
          </span>
        </button>
      </div>
    </form>
  </div>
</p-dialog>